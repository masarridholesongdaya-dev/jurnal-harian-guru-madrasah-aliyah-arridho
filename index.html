<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login Jurnal Guru</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&amp;display=swap" rel="stylesheet">
  <style>
    * { font-family: 'Plus Jakarta Sans', sans-serif; }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes pulse-ring {
      0% { transform: scale(0.8); opacity: 1; }
      100% { transform: scale(1.3); opacity: 0; }
    }
    
    .animate-float { animation: float 3s ease-in-out infinite; }
    .animate-fade-in-up { animation: fadeInUp 0.6s ease-out forwards; }
    .animate-delay-100 { animation-delay: 0.1s; }
    .animate-delay-200 { animation-delay: 0.2s; }
    .animate-delay-300 { animation-delay: 0.3s; }
    
    .input-focus:focus {
      box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.2);
    }
    
    .btn-hover:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px -5px rgba(59, 130, 246, 0.4);
    }
    
    .glass-card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.8);
    }
    
    .success-pulse::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: 50%;
      background: #22c55e;
      animation: pulse-ring 1s ease-out infinite;
    }
  </style>
  <style>body { box-sizing: border-box; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full m-0 overflow-auto" style="background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #06b6d4 100%);">
  <div class="min-h-full w-full flex items-center justify-center p-4 relative"><!-- Decorative Elements -->
   <div class="absolute top-10 left-10 w-20 h-20 bg-white/10 rounded-full blur-xl animate-float"></div>
   <div class="absolute bottom-20 right-10 w-32 h-32 bg-cyan-300/20 rounded-full blur-2xl animate-float" style="animation-delay: 1s;"></div>
   <div class="absolute top-1/3 right-1/4 w-16 h-16 bg-blue-300/20 rounded-full blur-xl animate-float" style="animation-delay: 0.5s;"></div><!-- Login Card -->
   <div class="glass-card rounded-3xl shadow-2xl w-full max-w-md p-8 md:p-10 opacity-0 animate-fade-in-up relative z-10"><!-- Icon -->
    <div class="flex justify-center mb-6 opacity-0 animate-fade-in-up animate-delay-100">
     <div class="w-20 h-20 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-2xl flex items-center justify-center shadow-lg transform rotate-3 hover:rotate-0 transition-transform duration-300">
      <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
      </svg>
     </div>
    </div><!-- Title -->
    <h1 id="page-title" class="text-2xl md:text-3xl font-bold text-center text-gray-800 mb-2 opacity-0 animate-fade-in-up animate-delay-100">Jurnal Mengajar Guru</h1>
    <p id="welcome-text" class="text-gray-500 text-center mb-8 opacity-0 animate-fade-in-up animate-delay-200">Silakan masukkan nama Anda untuk mengakses jurnal</p><!-- Form -->
    <form id="login-form" class="space-y-6 opacity-0 animate-fade-in-up animate-delay-300">
     <div><label for="teacher-name" class="block text-sm font-semibold text-gray-700 mb-2"> <span class="flex items-center gap-2">
        <svg class="w-4 h-4 text-blue-500" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
        </svg> Nama Guru </span> </label> <input type="text" id="teacher-name" name="teacher-name" placeholder="Masukkan nama Anda" autocomplete="name" class="input-focus w-full px-4 py-4 border-2 border-gray-200 rounded-xl text-gray-800 placeholder-gray-400 transition-all duration-300 focus:border-blue-500 focus:outline-none text-base">
     </div><!-- Error Message -->
     <div id="error-message" class="hidden bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-xl text-sm flex items-center gap-2">
      <svg class="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg><span id="error-text">Nama tidak ditemukan. Silakan coba lagi.</span>
     </div><!-- Success Message -->
     <div id="success-message" class="hidden bg-green-50 border border-green-200 text-green-600 px-4 py-3 rounded-xl text-sm flex items-center gap-2">
      <div class="relative w-5 h-5 flex-shrink-0">
       <svg class="w-5 h-5 relative z-10" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
       </svg>
      </div><span id="success-text">Selamat datang! Mengalihkan ke jurnal...</span>
     </div><button type="submit" id="submit-btn" class="btn-hover w-full bg-gradient-to-r from-blue-600 to-cyan-500 text-white font-semibold py-4 px-6 rounded-xl transition-all duration-300 flex items-center justify-center gap-2 shadow-lg"> <span id="button-text">Masuk ke Jurnal</span>
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
      </svg></button>
    </form><!-- Teacher List Hint -->
    <div class="mt-8 pt-6 border-t border-gray-100">
     <p class="text-xs text-gray-400 text-center mb-3">Guru yang terdaftar:</p>
     <div class="flex flex-wrap justify-center gap-2"><span class="px-3 py-1 bg-blue-50 text-blue-600 text-xs rounded-full font-medium">Efendi</span> <span class="px-3 py-1 bg-cyan-50 text-cyan-600 text-xs rounded-full font-medium">Ismail</span> <span class="px-3 py-1 bg-indigo-50 text-indigo-600 text-xs rounded-full font-medium">Quryadi</span> <span class="px-3 py-1 bg-teal-50 text-teal-600 text-xs rounded-full font-medium">Qibtiyah</span>
     </div>
    </div>
   </div>
  </div>
  <script>
    // Registered teachers (case-insensitive)
    const registeredTeachers = ['efendi', 'ismail', 'quryadi', 'qibtiyah'];
    const journalUrl = 'https://docs.google.com/forms/d/e/1FAIpQLSeQCAYp3KU5i_lsXmaXM4vJ4N8XAoXptsWdrhWpkxH9gbK5Lw/viewform?usp=header';
    
    // Default configuration
    const defaultConfig = {
      page_title: 'Jurnal Mengajar Guru',
      welcome_text: 'Silakan masukkan nama Anda untuk mengakses jurnal',
      button_text: 'Masuk ke Jurnal',
      background_color: '#1e3a8a',
      card_color: '#ffffff',
      text_color: '#1f2937',
      primary_button_color: '#2563eb',
      accent_color: '#06b6d4'
    };
    
    // DOM Elements
    const form = document.getElementById('login-form');
    const nameInput = document.getElementById('teacher-name');
    const errorMessage = document.getElementById('error-message');
    const errorText = document.getElementById('error-text');
    const successMessage = document.getElementById('success-message');
    const successText = document.getElementById('success-text');
    const submitBtn = document.getElementById('submit-btn');
    
    // Form submission handler
    form.addEventListener('submit', function(e) {
      e.preventDefault();
      
      const enteredName = nameInput.value.trim().toLowerCase();
      
      // Hide previous messages
      errorMessage.classList.add('hidden');
      successMessage.classList.add('hidden');
      
      if (!enteredName) {
        errorText.textContent = 'Silakan masukkan nama Anda.';
        errorMessage.classList.remove('hidden');
        nameInput.focus();
        return;
      }
      
      // Check if teacher is registered
      if (registeredTeachers.includes(enteredName)) {
        // Show success message
        const capitalizedName = enteredName.charAt(0).toUpperCase() + enteredName.slice(1);
        successText.textContent = `Selamat datang, ${capitalizedName}! Mengalihkan ke jurnal...`;
        successMessage.classList.remove('hidden');
        
        // Disable button during redirect
        submitBtn.disabled = true;
        submitBtn.innerHTML = `
          <svg class="animate-spin w-5 h-5" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
          </svg>
          <span>Mengalihkan...</span>
        `;
        
        // Open journal in new tab after brief delay
        setTimeout(() => {
          window.open(journalUrl, '_blank', 'noopener,noreferrer');
          
          // Reset form after redirect
          setTimeout(() => {
            submitBtn.disabled = false;
            submitBtn.innerHTML = `
              <span id="button-text">${window.elementSdk?.config?.button_text || defaultConfig.button_text}</span>
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"/>
              </svg>
            `;
            nameInput.value = '';
            successMessage.classList.add('hidden');
          }, 1500);
        }, 1000);
        
      } else {
        // Show error message
        errorText.textContent = `Nama "${nameInput.value}" tidak ditemukan dalam daftar guru.`;
        errorMessage.classList.remove('hidden');
        nameInput.classList.add('border-red-300');
        nameInput.focus();
        
        // Remove error styling on input
        setTimeout(() => {
          nameInput.classList.remove('border-red-300');
        }, 2000);
      }
    });
    
    // Clear error on input
    nameInput.addEventListener('input', function() {
      errorMessage.classList.add('hidden');
      nameInput.classList.remove('border-red-300');
    });
    
    // Element SDK integration
    async function onConfigChange(config) {
      const pageTitle = document.getElementById('page-title');
      const welcomeText = document.getElementById('welcome-text');
      const buttonText = document.getElementById('button-text');
      
      if (pageTitle) pageTitle.textContent = config.page_title || defaultConfig.page_title;
      if (welcomeText) welcomeText.textContent = config.welcome_text || defaultConfig.welcome_text;
      if (buttonText) buttonText.textContent = config.button_text || defaultConfig.button_text;
    }
    
    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.background_color || defaultConfig.background_color,
            set: (value) => { config.background_color = value; window.elementSdk.setConfig({ background_color: value }); }
          },
          {
            get: () => config.card_color || defaultConfig.card_color,
            set: (value) => { config.card_color = value; window.elementSdk.setConfig({ card_color: value }); }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => { config.text_color = value; window.elementSdk.setConfig({ text_color: value }); }
          },
          {
            get: () => config.primary_button_color || defaultConfig.primary_button_color,
            set: (value) => { config.primary_button_color = value; window.elementSdk.setConfig({ primary_button_color: value }); }
          },
          {
            get: () => config.accent_color || defaultConfig.accent_color,
            set: (value) => { config.accent_color = value; window.elementSdk.setConfig({ accent_color: value }); }
          }
        ],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      };
    }
    
    function mapToEditPanelValues(config) {
      return new Map([
        ['page_title', config.page_title || defaultConfig.page_title],
        ['welcome_text', config.welcome_text || defaultConfig.welcome_text],
        ['button_text', config.button_text || defaultConfig.button_text]
      ]);
    }
    
    // Initialize SDK
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9ce29be95677da7d',t:'MTc3MTEzNTQ3OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>